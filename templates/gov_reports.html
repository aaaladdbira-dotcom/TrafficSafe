{% extends 'base_private.html' %}
{% block head_extra %}
<style>
.gov-reports-container { max-width: 1200px; margin: 0 auto; padding: 20px 0; }
.gov-reports-header { text-align: center; margin-bottom: 40px; }
.gov-reports-header-icon {
  width: 80px; height: 80px;
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(245, 158, 11, 0.1) 100%);
  border-radius: 24px;
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 24px; color: #ef4444;
}
.gov-reports-header h2 { font-size: 28px; font-weight: 700; color: var(--ui-text); margin: 0 0 8px; }
.gov-reports-header p { font-size: 14px; color: var(--ui-muted); margin: 0; }

/* Table styling */
.gov-table { width: 100%; border-collapse: separate; border-spacing: 0; font-size: 13px; }
.gov-table thead th {
  background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);
  color: white !important; font-weight: 600; font-size: 11px;
  text-transform: uppercase; letter-spacing: 0.05em;
  padding: 12px 14px; border: none; white-space: nowrap;
}
.gov-table thead th:first-child { border-radius: 12px 0 0 0; }
.gov-table thead th:last-child { border-radius: 0 12px 0 0; }
.gov-table tbody td {
  padding: 14px; border-bottom: 1px solid var(--ui-border);
  background: var(--ui-surface); color: var(--ui-text);
  vertical-align: middle;
}
.gov-table tbody tr { opacity: 0; animation: fadeInRow 300ms ease forwards; }
.gov-table tbody tr:nth-child(1) { animation-delay: 50ms; }
.gov-table tbody tr:nth-child(2) { animation-delay: 100ms; }
.gov-table tbody tr:nth-child(3) { animation-delay: 150ms; }
.gov-table tbody tr:nth-child(4) { animation-delay: 200ms; }
.gov-table tbody tr:nth-child(5) { animation-delay: 250ms; }
.gov-table tbody tr:hover td { background: var(--ui-bg); }
@keyframes fadeInRow { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Status badges */
.status-pill { display: inline-flex; align-items: center; gap: 5px; padding: 5px 10px; border-radius: 20px; font-size: 11px; font-weight: 600; }
.status-pill.pending { background: rgba(245, 158, 11, 0.1); color: #d97706; }
.status-pill.confirmed { background: rgba(34, 197, 94, 0.1); color: #16a34a; }
.status-pill.rejected { background: rgba(239, 68, 68, 0.1); color: #dc2626; }

/* User cell */
.user-cell { line-height: 1.4; }
.user-cell strong { display: block; color: var(--ui-text); }
.user-cell small { color: var(--ui-muted); }

/* View button */
.btn-view {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 7px 14px; border-radius: 8px;
  background: var(--ui-bg); border: 1px solid var(--ui-border);
  color: var(--ui-text); font-size: 12px; font-weight: 600;
  text-decoration: none; transition: all 200ms ease;
}
.btn-view:hover {
  background: #ef4444; border-color: #ef4444;
  color: white; transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

/* Empty state */
.empty-state {
  text-align: center; padding: 60px 20px;
  background: var(--ui-surface); border-radius: 16px;
  border: 2px dashed var(--ui-border);
}
.empty-state-icon {
  width: 80px; height: 80px; margin: 0 auto 24px;
  background: var(--ui-bg); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  color: var(--ui-muted);
}
.empty-state h3 { font-size: 18px; font-weight: 600; color: var(--ui-text); margin: 0 0 8px; }
.empty-state p { font-size: 14px; color: var(--ui-muted); margin: 0; }

/* ============================================
   GOV REPORTS DARK MODE STYLES
   ============================================ */

body.dark-mode .gov-reports-container {
  color: var(--ui-text);
}

body.dark-mode .gov-reports-header h1 {
  color: var(--ui-text) !important;
}

body.dark-mode .gov-reports-header p {
  color: var(--ui-muted) !important;
}

body.dark-mode .gov-reports-header-icon {
  background: var(--ui-surface) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .gov-table {
  background: var(--ui-surface) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .gov-table thead {
  background: linear-gradient(180deg, var(--brand-600), var(--brand-700)) !important;
}

body.dark-mode .gov-table tbody td {
  color: var(--ui-text) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .gov-table tbody tr:hover {
  background: var(--ui-bg) !important;
}

body.dark-mode .status-pill {
  background: var(--ui-bg) !important;
}

body.dark-mode .user-cell span {
  color: var(--ui-text) !important;
}

body.dark-mode .user-cell small {
  color: var(--ui-muted) !important;
}

body.dark-mode .btn-view {
  background: var(--ui-bg) !important;
  border-color: var(--ui-border) !important;
  color: var(--ui-text) !important;
}

body.dark-mode .empty-state {
  background: var(--ui-surface) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .empty-state-icon {
  background: var(--ui-bg) !important;
}

body.dark-mode .empty-state h3 {
  color: var(--ui-text) !important;
}

body.dark-mode .empty-state p {
  color: var(--ui-muted) !important;
}
</style>
{% endblock %}

{% block content %}
<div class="gov-reports-container">
  <div class="gov-reports-header">
    <div class="gov-reports-header-icon">
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"></path>
        <rect x="9" y="3" width="6" height="4" rx="1"></rect>
        <path d="M9 12h6"></path>
        <path d="M9 16h6"></path>
      </svg>
    </div>
    <h2 data-i18n="govReports.title">Accident Reports Management</h2>
    <p data-i18n="govReports.subtitle">Review and process citizen-submitted accident reports</p>
  </div>

  {% if reports %}
  <div class="table-responsive">
    <table class="gov-table">
      <thead>
        <tr>
          <th data-i18n="govReports.id">ID</th>
          <th data-i18n="govReports.submission">Submission</th>
          <th data-i18n="govReports.accidentDate">Accident Date</th>
          <th data-i18n="govReports.location">Location</th>
          <th data-i18n="govReports.delegation">Delegation</th>
          <th data-i18n="govReports.severity">Severity</th>
          <th data-i18n="govReports.phone">Phone</th>
          <th data-i18n="govReports.user">User</th>
          <th data-i18n="govReports.status">Status</th>
          <th data-i18n="govReports.action">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for report in reports %}
        <tr>
          <td><code style="background: var(--ui-bg); padding: 3px 8px; border-radius: 6px;">#{{ report.id }}</code></td>
          <td>{{ report.created_at|replace('T', ' ')|truncate(16, True, '') }}</td>
          <td>{{ report.date|replace('T', ' ')|truncate(16, True, '') }}</td>
          <td>{{ report.location }}</td>
          <td>{{ report.delegation }}</td>
          <td><span class="badge bg-{{ 'danger' if report.severity == 'fatal' else 'warning' if report.severity == 'severe' else 'info' }}">{{ report.severity|capitalize }}</span></td>
          <td>{{ report.phone }}</td>
          <td class="user-cell">
            <strong>{{ report.user.full_name }}</strong>
            <small>{{ report.user.email }}</small>
          </td>
          <td>
            <span class="status-pill {{ report.status|lower }}">{{ report.status|capitalize }}</span>
          </td>
          <td>
            <a href="{{ url_for('gov_reports_ui.report_detail', report_id=report.id) }}" class="btn-view">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
              <span data-i18n="govReports.review">Review</span>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="empty-state">
    <div class="empty-state-icon">
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"></path>
        <rect x="9" y="3" width="6" height="4" rx="1"></rect>
      </svg>
    </div>
    <h3 data-i18n="govReports.noReports">No reports to review</h3>
    <p data-i18n="govReports.noReportsDesc">There are no pending accident reports from citizens at this time.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
