{% extends 'base_private.html' %}
{% block head_extra %}
<style>
.my-reports-container { max-width: 1000px; margin: 0 auto; padding: 20px 0; }
.my-reports-header { text-align: center; margin-bottom: 40px; }
.my-reports-header-icon {
  width: 80px; height: 80px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
  border-radius: 24px;
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 24px; color: #3b82f6;
}
.my-reports-header h2 { font-size: 28px; font-weight: 700; color: var(--ui-text); margin: 0 0 8px; }
.my-reports-header p { font-size: 14px; color: var(--ui-muted); margin: 0; }

/* Table styling */
.reports-table { width: 100%; border-collapse: separate; border-spacing: 0; }
.reports-table thead th {
  background: linear-gradient(135deg, var(--ui-primary) 0%, var(--brand-600) 100%);
  color: white !important; font-weight: 600; font-size: 12px;
  text-transform: uppercase; letter-spacing: 0.05em;
  padding: 14px 16px; border: none;
}
.reports-table thead th:first-child { border-radius: 12px 0 0 0; }
.reports-table thead th:last-child { border-radius: 0 12px 0 0; }
.reports-table tbody td {
  padding: 16px; border-bottom: 1px solid var(--ui-border);
  background: var(--ui-surface); color: var(--ui-text);
  font-size: 14px; vertical-align: middle;
}
.reports-table tbody tr { opacity: 0; animation: fadeInRow 300ms ease forwards; }
.reports-table tbody tr:nth-child(1) { animation-delay: 50ms; }
.reports-table tbody tr:nth-child(2) { animation-delay: 100ms; }
.reports-table tbody tr:nth-child(3) { animation-delay: 150ms; }
.reports-table tbody tr:nth-child(4) { animation-delay: 200ms; }
.reports-table tbody tr:nth-child(5) { animation-delay: 250ms; }
.reports-table tbody tr:hover td { background: var(--ui-bg); }
@keyframes fadeInRow { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Status badges */
.status-pill { display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
.status-pill--pending { background: rgba(245, 158, 11, 0.1); color: #d97706; }
.status-pill--confirmed { background: rgba(34, 197, 94, 0.1); color: #16a34a; }
.status-pill--rejected { background: rgba(239, 68, 68, 0.1); color: #dc2626; }
.status-pill svg { width: 14px; height: 14px; }

/* Empty state */
.empty-state {
  text-align: center; padding: 60px 20px;
  background: var(--ui-surface); border-radius: 16px;
  border: 2px dashed var(--ui-border);
}
.empty-state-icon {
  width: 80px; height: 80px; margin: 0 auto 24px;
  background: var(--ui-bg); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  color: var(--ui-muted);
}
.empty-state h3 { font-size: 18px; font-weight: 600; color: var(--ui-text); margin: 0 0 8px; }
.empty-state p { font-size: 14px; color: var(--ui-muted); margin: 0 0 24px; }
.empty-state .btn-primary {
  background: linear-gradient(135deg, var(--ui-primary) 0%, var(--brand-600) 100%);
  border: none; padding: 12px 24px; border-radius: 12px; font-weight: 600;
}

/* ============================================
   MY REPORTS DARK MODE STYLES
   ============================================ */

body.dark-mode .my-reports-container {
  color: var(--ui-text);
}

body.dark-mode .my-reports-header h1 {
  color: var(--ui-text) !important;
}

body.dark-mode .my-reports-header p {
  color: var(--ui-muted) !important;
}

body.dark-mode .my-reports-header-icon {
  background: var(--ui-surface) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .reports-table {
  background: var(--ui-surface) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .reports-table thead {
  background: linear-gradient(180deg, var(--brand-600), var(--brand-700)) !important;
}

body.dark-mode .reports-table tbody td {
  color: var(--ui-text) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .reports-table tbody tr:hover td {
  background: var(--ui-bg) !important;
}

body.dark-mode .status-pill--pending {
  background: rgba(245, 158, 11, 0.15) !important;
}

body.dark-mode .status-pill--confirmed {
  background: rgba(34, 197, 94, 0.15) !important;
}

body.dark-mode .status-pill--rejected {
  background: rgba(239, 68, 68, 0.15) !important;
}

body.dark-mode .empty-state {
  background: var(--ui-surface) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .empty-state-icon {
  background: var(--ui-bg) !important;
}

body.dark-mode .empty-state h3 {
  color: var(--ui-text) !important;
}

body.dark-mode .empty-state p {
  color: var(--ui-muted) !important;
}
</style>
{% endblock %}

{% block content %}
<div class="my-reports-container">
  <div class="my-reports-header">
    <div class="my-reports-header-icon">
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
        <polyline points="10 9 9 9 8 9"></polyline>
      </svg>
    </div>
    <h2 data-i18n="myReports.title">My Accident Reports</h2>
    <p data-i18n="myReports.subtitle">Track the status of your submitted accident reports</p>
  </div>

  {% if reports %}
  <div class="table-responsive">
    <table class="reports-table">
      <thead>
        <tr>
          <th data-i18n="myReports.submitted">Submitted</th>
          <th data-i18n="myReports.accidentDate">Accident Date</th>
          <th data-i18n="myReports.location">Location</th>
          <th data-i18n="myReports.delegation">Delegation</th>
          <th data-i18n="myReports.severity">Severity</th>
          <th data-i18n="myReports.status">Status</th>
        </tr>
      </thead>
      <tbody>
        {% for r in reports %}
        <tr>
          <td>{{ r.created_at|replace('T', ' ')|truncate(16, True, '') }}</td>
          <td>{{ r.date|replace('T', ' ')|truncate(16, True, '') }}</td>
          <td>{{ r.location }}</td>
          <td>{{ r.delegation }}</td>
          <td><span class="badge bg-{{ 'danger' if r.severity == 'fatal' else 'warning' if r.severity == 'severe' else 'info' }}">{{ r.severity|capitalize }}</span></td>
          <td>
            {% if r.status == 'PENDING' %}
              <span class="status-pill status-pill--pending">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                <span data-i18n="myReports.pending">Pending</span>
              </span>
            {% elif r.status == 'CONFIRMED' %}
              <span class="status-pill status-pill--confirmed">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                <span data-i18n="myReports.confirmed">Confirmed</span>
              </span>
            {% elif r.status == 'REJECTED' %}
              <span class="status-pill status-pill--rejected">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
                <span data-i18n="myReports.rejected">Rejected</span>
              </span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="empty-state">
    <div class="empty-state-icon">
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
      </svg>
    </div>
    <h3 data-i18n="myReports.noReports">No reports yet</h3>
    <p data-i18n="myReports.noReportsDesc">You haven't submitted any accident reports. Report an accident to help improve road safety.</p>
    <a href="{{ url_for('report_ui.report_accident') }}" class="btn btn-primary">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
      <span data-i18n="myReports.reportAccident">Report an Accident</span>
    </a>
  </div>
  {% endif %}
</div>
{% endblock %}
