{% extends 'base_private.html' %}
{% block head_extra %}
<style>
.users-container { max-width: 1100px; margin: 0 auto; padding: 20px 0; }
.users-header { text-align: center; margin-bottom: 40px; }
.users-header-icon {
  width: 80px; height: 80px;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%);
  border-radius: 24px;
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 24px; color: #8b5cf6;
}
.users-header h2 { font-size: 28px; font-weight: 700; color: var(--ui-text); margin: 0 0 8px; }
.users-header p { font-size: 14px; color: var(--ui-muted); margin: 0; }

/* Table styling */
.users-table { width: 100%; border-collapse: separate; border-spacing: 0; }
.users-table thead th {
  background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
  color: white !important; font-weight: 600; font-size: 12px;
  text-transform: uppercase; letter-spacing: 0.05em;
  padding: 14px 16px; border: none;
}
.users-table thead th:first-child { border-radius: 12px 0 0 0; }
.users-table thead th:last-child { border-radius: 0 12px 0 0; }
.users-table tbody td {
  padding: 16px; border-bottom: 1px solid var(--ui-border);
  background: var(--ui-surface); color: var(--ui-text);
  font-size: 14px; vertical-align: middle;
}
.users-table tbody tr { opacity: 0; animation: fadeInRow 300ms ease forwards; }
.users-table tbody tr:nth-child(1) { animation-delay: 50ms; }
.users-table tbody tr:nth-child(2) { animation-delay: 100ms; }
.users-table tbody tr:nth-child(3) { animation-delay: 150ms; }
.users-table tbody tr:nth-child(4) { animation-delay: 200ms; }
.users-table tbody tr:nth-child(5) { animation-delay: 250ms; }
.users-table tbody tr:hover td { background: var(--ui-bg); }
@keyframes fadeInRow { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Role badges */
.role-badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: 8px; font-size: 12px; font-weight: 600; text-transform: capitalize; }
.role-badge--government { background: rgba(239, 68, 68, 0.1); color: #dc2626; }
.role-badge--citizen { background: rgba(59, 130, 246, 0.1); color: #2563eb; }
.role-badge--police { background: rgba(34, 197, 94, 0.1); color: #16a34a; }
.role-badge--media { background: rgba(245, 158, 11, 0.1); color: #d97706; }

/* View button */
.btn-view {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 8px 16px; border-radius: 10px;
  background: var(--ui-bg); border: 1px solid var(--ui-border);
  color: var(--ui-text); font-size: 13px; font-weight: 600;
  text-decoration: none; transition: all 200ms ease;
}
.btn-view:hover {
  background: var(--ui-primary); border-color: var(--ui-primary);
  color: white; transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

/* Empty state */
.empty-state {
  text-align: center; padding: 60px 20px;
  background: var(--ui-surface); border-radius: 16px;
  border: 2px dashed var(--ui-border);
}
.empty-state-icon {
  width: 80px; height: 80px; margin: 0 auto 24px;
  background: var(--ui-bg); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  color: var(--ui-muted);
}
.empty-state h3 { font-size: 18px; font-weight: 600; color: var(--ui-text); margin: 0 0 8px; }
.empty-state p { font-size: 14px; color: var(--ui-muted); margin: 0; }

/* ============================================
   USERS MANAGEMENT DARK MODE STYLES
   ============================================ */

body.dark-mode .users-container {
  color: var(--ui-text);
}

body.dark-mode .users-header h1 {
  color: var(--ui-text) !important;
}

body.dark-mode .users-header p {
  color: var(--ui-muted) !important;
}

body.dark-mode .users-header-icon {
  background: var(--ui-surface) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .users-table {
  background: var(--ui-surface) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .users-table thead {
  background: linear-gradient(180deg, var(--brand-600), var(--brand-700)) !important;
}

body.dark-mode .users-table tbody td {
  color: var(--ui-text) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .users-table tbody tr:hover {
  background: var(--ui-bg) !important;
}

body.dark-mode .role-badge--government { background: rgba(139, 92, 246, 0.15) !important; }
body.dark-mode .role-badge--citizen { background: rgba(34, 197, 94, 0.15) !important; }
body.dark-mode .role-badge--police { background: rgba(59, 130, 246, 0.15) !important; }
body.dark-mode .role-badge--researcher { background: rgba(236, 72, 153, 0.15) !important; }
body.dark-mode .role-badge--media { background: rgba(245, 158, 11, 0.15) !important; }

body.dark-mode .btn-view {
  background: var(--ui-bg) !important;
  border-color: var(--ui-border) !important;
  color: var(--ui-text) !important;
}

body.dark-mode .empty-state {
  background: var(--ui-surface) !important;
  border-color: var(--ui-border) !important;
}

body.dark-mode .empty-state-icon {
  background: var(--ui-bg) !important;
}

body.dark-mode .empty-state h3 {
  color: var(--ui-text) !important;
}

body.dark-mode .empty-state p {
  color: var(--ui-muted) !important;
}
</style>
{% endblock %}

{% block content %}
<div class="users-container">
  <div class="users-header">
    <div class="users-header-icon">
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
      </svg>
    </div>
    <h2 data-i18n="users.title">Users Management</h2>
    <p data-i18n="users.subtitle">View and manage all registered users in the system</p>
  </div>

  {% if users %}
  <div class="table-responsive">
    <table class="users-table">
      <thead>
        <tr>
          <th data-i18n="users.fullName">Full Name</th>
          <th data-i18n="users.email">Email</th>
          <th data-i18n="users.role">Role</th>
          <th data-i18n="users.nationalId">National ID</th>
          <th data-i18n="users.actions">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          <td><strong>{{ user.full_name }}</strong></td>
          <td>{{ user.email }}</td>
          <td>
            <span class="role-badge role-badge--{{ user.role }}">{{ user.role }}</span>
          </td>
          <td><code style="background: var(--ui-bg); padding: 4px 8px; border-radius: 6px; font-size: 13px;">{{ user.national_id }}</code></td>
          <td>
            <a href="{{ url_for('users_ui.user_detail', user_id=user.id) }}" class="btn-view">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
              <span data-i18n="users.view">View</span>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="empty-state">
    <div class="empty-state-icon">
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
      </svg>
    </div>
    <h3 data-i18n="users.noUsers">No users found</h3>
    <p>There are no registered users in the system yet.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
